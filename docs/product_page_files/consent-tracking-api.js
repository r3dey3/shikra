!function(){"use strict";let n,t,e,r,o,i,c,u,C,E;!function(n){n.TRACKING_ACCEPTED="trackingConsentAccepted",n.TRACKING_DECLINED="trackingConsentDeclined",n.FIRST_PARTY_MARKETING_ACCEPTED="firstPartyMarketingConsentAccepted",n.THIRD_PARTY_MARKETING_ACCEPTED="thirdPartyMarketingConsentAccepted",n.ANALYTICS_ACCEPTED="analyticsConsentAccepted",n.PREFERENCES_ACCEPTED="preferencesConsentAccepted",n.FIRST_PARTY_MARKETING_DECLINED="firstPartyMarketingConsentDeclined",n.THIRD_PARTY_MARKETING_DECLINED="thirdPartyMarketingConsentDeclined",n.ANALYTICS_DECLINED="analyticsConsentDeclined",n.PREFERENCES_DECLINED="preferencesConsentDeclined",n.CONSENT_COLLECTED="visitorConsentCollected"}(n||(n={})),function(n){n.V2_0="2.0",n.V2_1="2.1"}(t||(t={})),function(n){n.ACCEPTED="yes",n.DECLINED="no",n.NO_INTERACTION="no_interaction",n.NO_VALUE=""}(e||(e={})),function(n){n.NO_VALUE="",n.ACCEPTED="1",n.DECLINED="0"}(r||(r={})),function(n){n.GDPR="GDPR",n.CCPA="CCPA",n.NO_VALUE=""}(o||(o={})),function(n){n.PREFERENCES="p",n.ANALYTICS="a",n.FIRST_PARTY_MARKETING="m",n.THIRD_PARTY_MARKETING="t"}(i||(i={})),function(n){n.CCPA_BLOCK_ALL="CCPA_BLOCK_ALL",n.GDPR="GDPR",n.GDPR_BLOCK_ALL="GDPR_BLOCK_ALL",n.CCPA="CCPA"}(c||(c={})),function(n){n.MARKETING="m",n.ANALYTICS="a",n.PREFERENCES="p",n.GPC="g",n.SALE_OF_DATA="s"}(u||(u={})),function(n){n.MARKETING="m",n.ANALYTICS="a",n.PREFERENCES="p",n.GPC="g",n.SALE_OF_DATA="s"}(C||(C={})),function(n){n.MARKETING="marketing",n.ANALYTICS="analytics",n.PREFERENCES="preferences",n.GPC="gpc",n.SALE_OF_DATA="sale_of_data"}(E||(E={}));const s=["lim","v","con","reg"];function a(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function A(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?a(Object(e),!0).forEach((function(t){f(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function f(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function l(){const n=document.cookie?document.cookie.split("; "):[];let e=void 0;if(n.forEach(n=>{const[t,r]=n.split("=");if("_tracking_consent"===decodeURIComponent(t)){var o=JSON.parse(decodeURIComponent(r));e=o}}),void 0!==e&&!function(n){if(![t.V2_0,t.V2_1].includes(n.v))return!0;return!function(n,t){const e=t.slice().sort();return n.length===t.length&&n.slice().sort().every((n,t)=>n===e[t])}(Object.keys(n).filter(n=>"region"!==n),s)}(e))return e}function T(){try{let n=l();if(!n)return;return n.v===t.V2_0?function(n){const e=n.con||{};return{con:{CMP:{[C.MARKETING]:e.GDPR||r.NO_VALUE,[u.ANALYTICS]:e.GDPR||r.NO_VALUE,[u.PREFERENCES]:e.GDPR||r.NO_VALUE,[u.GPC]:r.NO_VALUE,[u.SALE_OF_DATA]:e.CCPA||r.NO_VALUE}},reg:n.reg,v:t.V2_1,lim:n.lim}}(n):n}catch(n){return}}function P(){const n=l();switch(null==n?void 0:n.v){case"2.0":return t.V2_0;case"2.1":return t.V2_1;default:return}}function R(){return{m:L(C.MARKETING),a:L(C.ANALYTICS),p:L(C.PREFERENCES),s:L(C.SALE_OF_DATA),g:L(C.GPC)}}function _(){return R()[C.SALE_OF_DATA]}function N(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===n&&(n=T()),void 0===n}function D(n){switch(n){case r.ACCEPTED:return e.ACCEPTED;case r.DECLINED:return e.DECLINED;default:return e.NO_VALUE}}function I(n){switch(n){case u.ANALYTICS:return E.ANALYTICS;case u.MARKETING:return E.MARKETING;case u.PREFERENCES:return E.PREFERENCES;case u.SALE_OF_DATA:return E.SALE_OF_DATA;case u.GPC:return E.GPC}}function L(n){if(n==C.GPC){if(!z.isGPCSignalPresent())return r.NO_VALUE;return!z.isGPCOptOutPresent()?r.ACCEPTED:r.DECLINED}const t=T();if(!t)return r.NO_VALUE;const e=t.con.CMP;return e?e[n]:r.NO_VALUE}function d(){const n=document.cookie?document.cookie.split("; "):[];let t=void 0;return n.forEach(n=>{const[e,r]=n.split("=");if("_cmp_a"===decodeURIComponent(e)){var o=JSON.parse(decodeURIComponent(r));t=o}}),t}function g(n){const t=d();if(!t)return!0;const e=t.purposes[n];return"boolean"!=typeof e||e}function S(){return g(i.PREFERENCES)}function p(){return g(i.ANALYTICS)}function O(){return g(i.FIRST_PARTY_MARKETING)}function h(){return g(i.THIRD_PARTY_MARKETING)}const y={"":[],GDPR:[c.GDPR,c.GDPR_BLOCK_ALL],CCPA:[c.CCPA_BLOCK_ALL,c.CCPA]};function G(n,t){document.dispatchEvent(new CustomEvent(n,{detail:t||{}}))}function w(t){!0===t[i.FIRST_PARTY_MARKETING]?G(n.FIRST_PARTY_MARKETING_ACCEPTED):!1===t[i.FIRST_PARTY_MARKETING]&&G(n.FIRST_PARTY_MARKETING_DECLINED),!0===t[i.THIRD_PARTY_MARKETING]?G(n.THIRD_PARTY_MARKETING_ACCEPTED):!1===t[i.THIRD_PARTY_MARKETING]&&G(n.THIRD_PARTY_MARKETING_DECLINED),!0===t[i.ANALYTICS]?G(n.ANALYTICS_ACCEPTED):!1===t[i.ANALYTICS]&&G(n.ANALYTICS_DECLINED),!0===t[i.PREFERENCES]?G(n.PREFERENCES_ACCEPTED):!1===t[i.PREFERENCES]&&G(n.PREFERENCES_DECLINED);const e=function(n){return{firstPartyMarketingAllowed:n[i.FIRST_PARTY_MARKETING],thirdPartyMarketingAllowed:n[i.THIRD_PARTY_MARKETING],analyticsAllowed:n[i.ANALYTICS],preferencesAllowed:n[i.PREFERENCES]}}(t);G(n.CONSENT_COLLECTED,e)}function M(t,e,r){const o=new XMLHttpRequest,c=JSON.stringify(t);o.open("POST","/set_tracking_consent.json",!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){if(4!==o.readyState)return;const c=function(n){try{return JSON.parse(n)}catch(n){return{error:"Unknown error"}}}(o.responseText);var u;0===(u=o.status)||200>=u&&u<400?(!function(t,e){void 0!==t.consent?(!0===t.consent?G(n.TRACKING_ACCEPTED):G(n.TRACKING_DECLINED),e&&w({[i.PREFERENCES]:t.consent,[i.ANALYTICS]:t.consent,[i.FIRST_PARTY_MARKETING]:t.consent,[i.THIRD_PARTY_MARKETING]:t.consent})):void 0!==t.granular_consent&&w({[i.PREFERENCES]:S(),[i.ANALYTICS]:p(),[i.FIRST_PARTY_MARKETING]:O(),[i.THIRD_PARTY_MARKETING]:h()})}(t,r),e(null,c)):e(c)},o.send(c)}function b(){if(N())return e.NO_VALUE;const n=R();return n[u.MARKETING]===r.ACCEPTED&&n[u.ANALYTICS]===r.ACCEPTED?e.ACCEPTED:n[u.MARKETING]===r.DECLINED||n[u.ANALYTICS]===r.DECLINED?e.DECLINED:e.NO_INTERACTION}function K(){const n=function(){const n=T();return N(n)?o.NO_VALUE:n.reg}();return n in o?n:o.NO_VALUE}function m(){return function(){const n=T();return N(n)?{limit:[]}:{limit:n.lim}}()}function v(n){return j(c.GDPR_BLOCK_ALL)&&n?k()?document.referrer:"":null}function Y(n){return j(c.GDPR_BLOCK_ALL)&&n?k()?window.location.pathname+window.location.search:"/":null}function F(){return"string"==typeof navigator.globalPrivacyControl?"1"===navigator.globalPrivacyControl:Boolean(navigator.globalPrivacyControl)}function k(){if(""===document.referrer)return!0;const n=document.createElement("a");return n.href=document.referrer,window.location.hostname!=n.hostname}function V(){return j(c.GDPR)||j(c.GDPR_BLOCK_ALL)}function B(){const n=K();if(n===o.NO_VALUE)return!1;const t=m();return 0!==t.limit.length&&t.limit.some(t=>function(n,t){return y[n].includes(t)}(n,t))}function U(){return!!N()||function(){if(!V())return!0;const n=R();return n[u.MARKETING]===r.ACCEPTED&&n[u.ANALYTICS]===r.ACCEPTED||n[u.MARKETING]!==r.DECLINED&&n[u.ANALYTICS]!==r.DECLINED&&K()!==o.GDPR}()}function j(n){return m().limit.includes(n)}function H(){return K()===o.CCPA&&(!!j(c.CCPA)&&F())}function J(){return!H()&&(!!N()||!1!==U()&&function(){if(j(c.CCPA_BLOCK_ALL)){return K()!==o.CCPA}if(j(c.CCPA)){return _()!==r.DECLINED}return!0}())}function x(){return H()?e.DECLINED:(n=_(),N()?e.NO_VALUE:n===r.NO_VALUE?e.NO_INTERACTION:D(n));var n}function q(n){if(!V())return!0;const t=R();return t[n]===r.ACCEPTED||t[n]!==r.DECLINED&&K()!==o.GDPR}function X(){return P()===t.V2_1}const z={getTrackingConsent:b,setTrackingConsent:function(n,t){if(N()){const n="Shop is not configured to block privacy regulation in online store settings.";return console.warn(n),t({error:n})}if(function(n){if(X()){if("boolean"!=typeof n&&"object"!=typeof n)throw TypeError("setTrackingConsent must be called with a boolean or object consent value");if("object"==typeof n){const t=Object.keys(n);if(0===t.length)throw TypeError("The submitted consent object is empty.");const e=[E.MARKETING,E.ANALYTICS,E.PREFERENCES,E.SALE_OF_DATA];for(const n of t)if(!e.includes(n))throw TypeError("The submitted consent object should only contain the following keys: ".concat(e.join(", "),"."))}}else if("boolean"!=typeof n)throw TypeError("setTrackingConsent must be called with a boolean consent value")}(n),"function"!=typeof t)throw TypeError("setTrackingConsent must be called with a callback function");if("object"==typeof n){const e=v(n.analytics),r=Y(n.analytics);return M(A(A({granular_consent:n},null!==e&&{referrer:e}),null!==r&&{landing_page:r}),t,X())}{const e=v(n),r=Y(n);return M(A(A({consent:n},null!==e&&{referrer:e}),null!==r&&{landing_page:r}),t,X())}},userCanBeTracked:U,getRegulation:K,isRegulationEnforced:B,getShopPrefs:m,shouldShowGDPRBanner:function(){return K()===o.GDPR&&B()&&b()===e.NO_INTERACTION},userDataCanBeSold:J,setCCPAConsent:function(n,t){if("boolean"!=typeof n)throw TypeError("setCCPAConsent must be called with a boolean consent value");if("function"!=typeof t)throw TypeError("setCCPAConsent must be called with a callback function");return M({ccpa_consent:n},t,X())},getCCPAConsent:x,shouldShowCCPABanner:function(){return K()===o.CCPA&&m().limit.includes(c.CCPA)&&x()===e.NO_INTERACTION},haveAnalyticsConsent:function(){return X()?p():q(u.ANALYTICS)},havePreferencesConsent:function(){return X()?S():q(u.PREFERENCES)},haveFirstPartyMarketingConsent:function(){return X()?O():q(u.MARKETING)},haveThirdPartyMarketingConsent:function(){return X()?h():!!q(u.MARKETING)&&!!J()},getCCPAConsentValue:_,merchantEnforcingRegulationLimit:j,isGPCSignalPresent:function(){return void 0!==navigator.globalPrivacyControl},isGPCOptOutPresent:F,isValidGPCSignalOptOutPresent:H,exposeBetaFunctionality:X,shouldShowBanner:function(){return X()&&function(){const n=d();return!!n&&("boolean"==typeof n.display_banner&&n.display_banner)}()&&L(C.ANALYTICS)===r.NO_VALUE&&L(C.MARKETING)===r.NO_VALUE&&L(C.PREFERENCES)===r.NO_VALUE},saleOfDataRegion:function(){return X()&&function(){const n=d();return n&&n.sale_of_data_region||!1}()}};function Q(){return z.getTrackingConsent()}function W(n,t){z.setTrackingConsent(n,t)}function Z(){return z.userCanBeTracked()}function $(){return z.getRegulation()}function nn(){return z.isRegulationEnforced()}function tn(){return z.getShopPrefs()}function en(){return z.shouldShowGDPRBanner()}function rn(){return z.userDataCanBeSold()}function on(n,t){return z.setCCPAConsent(n,t)}function cn(){return z.getCCPAConsent()}function un(){return z.shouldShowCCPABanner()}function Cn(){return z.haveAnalyticsConsent()}function En(){return z.havePreferencesConsent()}function sn(){return z.haveFirstPartyMarketingConsent()}function an(){return z.haveThirdPartyMarketingConsent()}function An(){return z.shouldShowBanner()}function fn(){return z.saleOfDataRegion()}function ln(){return P()===t.V2_1}function Tn(){return ln()}function Pn(){const n={};if(t=c.GDPR_BLOCK_ALL,tn().limit.includes(t)&&ln()){const t=R();for(const e of Object.keys(t))n[I(e)]=D(t[e])}var t;return n}function Rn(){z.getCCPAConsentValue()!=r.DECLINED&&z.isValidGPCSignalOptOutPresent()&&on(!1,()=>!1);const n={getTrackingConsent:Q,setTrackingConsent:W,userCanBeTracked:Z,getRegulation:$,isRegulationEnforced:nn,getShopPrefs:tn,shouldShowGDPRBanner:en,userDataCanBeSold:rn,setCCPAConsent:on,getCCPAConsent:cn,shouldShowCCPABanner:un,doesMerchantSupportGranularConsent:Tn};if(z.exposeBetaFunctionality()){const t={analyticsProcessingAllowed:Cn,preferencesProcessingAllowed:En,firstPartyMarketingAllowed:sn,thirdPartyMarketingAllowed:an,currentVisitorConsent:Pn,shouldShowBanner:An,saleOfDataRegion:fn};n.unstable=t}return n}window.Shopify=window.Shopify?window.Shopify:{},window.Shopify.customerPrivacy=window.Shopify.trackingConsent=Rn()}();
